


ARM Macro Assembler    Page 1 


    1 00000000         ;-------------------------------- PUERTO K -------------
                       -----------------------------
    2 00000000 40061004 
                       GPIO_PORTBR
                               EQU              0x40061004  ;GPIO Port B (AHB) 
                                                            0x40059000 base de 
                                                            datos LECTURA (pin 
                                                            K0)
    3 00000000 40061008 
                       GPIO_PORTBW
                               EQU              0x40061008  ;GPIO Port B (AHB) 
                                                            0x40059000 base de 
                                                            datos ESCRITURA (pi
                                                            n K1)
    4 00000000 40061400 
                       GPIO_PORTB_DIR_R
                               EQU              0x40061400  ;Offset 0x400=>  0 
                                                            es entrada, 1 salid
                                                            a
    5 00000000 40061420 
                       GPIO_PORTB_AFSEL_R
                               EQU              0x40061420  ;Offset 0x420=>  0 
                                                            funcion como GPIO, 
                                                            1 funciona como per
                                                            iferico
    6 00000000 4006151C 
                       GPIO_PORTB_DEN_R
                               EQU              0x4006151C  ;Offset 0x51C=>  0 
                                                            funcina como NO dig
                                                            ital, 1 funcion dig
                                                            ital
    7 00000000 40061528 
                       GPIO_PORTB_AMSEL_R
                               EQU              0x40061528  ;Offset 0x528=>  0 
                                                            Deshabilita funcion
                                                             analogica, 1 activ
                                                            a analogica
    8 00000000 4006152C 
                       GPIO_PORTB_PCTL_R
                               EQU              0x4006152C  ;Offset 0x52C=>  0 
                                                            Selecciona funcion 
                                                            alternativa
    9 00000000 4006150C 
                       GPIO_PORTB_ODR_R
                               EQU              0x4006150C  ;Offset 0x50C=>  1 
                                                            Activa drenador abi
                                                            ertoGPIO_PORTB_LOCK
                                                             
   10 00000000         
   11 00000000         ;Direccion para activar y verificar puertos
   12 00000000 400FE608 
                       SYSCTL_RCGCGPIO_R
                               EQU              0x400FE608  ;Base 0x400F.E000, 
                                                            Offset 0x608=> 1 ac
                                                            tiva puerto, 0 desa
                                                            ctiva puerto
   13 00000000 400FEA08 
                       SYSCTL_PRGPIO_R
                               EQU              0x400FEA08  ;Base 0x400F.E000, 



ARM Macro Assembler    Page 2 


                                                            Offset 0xA08 indica
                                                             puerto listo
   14 00000000 00000200 
                       SYSCTL_RCGCGPIO_R12
                               EQU              0x00000200  ;1 Enable and provi
                                                            de a clock to GPIO 
                                                            Port B in Run mode 
                                                            K
   15 00000000 00000200 
                       SYSCTL_PRGPIO_R12
                               EQU              0x00000200  ;Bandera puerto lis
                                                            to K
   16 00000000         
   17 00000000         ;**********************Direccion para activar SysTick***
                       ************************
   18 00000000 E000E018 
                       SYSCTL_STCURRENT
                               EQU              0XE000E018
   19 00000000 E000E014 
                       SYSCTL_STRELOAD
                               EQU              0XE000E014
   20 00000000 E000E010 
                       SYSCTL_STCTRL
                               EQU              0XE000E010
   21 00000000         
   22 00000000         ;----------------------------MACRO----------------------
                       --------------------------------------
   23 00000000                 MACRO
   24 00000000                 REtardo          $VALOR
   25 00000000                 PUSH             {R7, LR}
   26 00000000                 MOV              R7, $VALOR
   27 00000000                 LSL              R7, R7, #2
   28 00000000                 BL               DELAY_480
   29 00000000                 POP              {R7,LR}
   30 00000000                 MEND
   31 00000000         ;----------------------------------------------
   32 00000000         
   33 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   34 00000000                 THUMB
   35 00000000         
   36 00000000                 IMPORT           Start
   37 00000000                 EXPORT           UP_DS18B20
   38 00000000                 EXPORT           INI_reset
   39 00000000                 EXPORT           ENVIA_CERO
   40 00000000                 EXPORT           ENVIA_UNO
   41 00000000                 EXPORT           LECTURA
   42 00000000                 EXPORT           DELAY_480
   43 00000000         
   44 00000000         ;*******************************************************
                       *****************
   45 00000000         UP_DS18B20
   46 00000000         ;*******************************************************
                       *****************
   47 00000000         
   48 00000000         ;------------------------------------ PORT K -----------
                       ---------------------
   49 00000000         
   50 00000000         ;activa reloj para el puerto D



ARM Macro Assembler    Page 3 


   51 00000000 4977            LDR              R1, =SYSCTL_RCGCGPIO_R ; R1 = S
                                                            YSCTL_RCGCGPIO_R di
                                                            reccion que  1 acti
                                                            va puerto
   52 00000002 6808            LDR              R0, [R1]    ; R0 = [R1] lee val
                                                            or
   53 00000004 F440 7000       ORR              R0, R0, #SYSCTL_RCGCGPIO_R12 ; 
                                                            R0 = R0|SYSCTL_RCGC
                                                            GPIO_R12, activa re
                                                            loj de puerto
   54 00000008 6008            STR              R0, [R1]    ; [R1] = R0  se gua
                                                            rda
   55 0000000A         
   56 0000000A         ;Verifica si el reloj es estable
   57 0000000A 4976            LDR              R1, =SYSCTL_PRGPIO_R ; R1 = SYS
                                                            CTL_PRGPIO_R (point
                                                            er)
   58 0000000C         GPIONinitloop
   59 0000000C 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
   60 0000000E F410 7000       ANDS             R0, R0, #SYSCTL_PRGPIO_R12 ; R0
                                                             = R0&SYSCTL_PRGPIO
                                                            _R12
   61 00000012 D0FB            BEQ              GPIONinitloop ; if(R0 == 0), ke
                                                            ep polling
   62 00000014         
   63 00000014         ; Direccion de salida
   64 00000014 4974            LDR              R1, =GPIO_PORTB_DIR_R ; R1 = GP
                                                            IO_PORTd_DIR_R 
   65 00000016 6808            LDR              R0, [R1]    ; R0 = [R1]
   66 00000018 F040 002A       ORR              R0, R0, #0X2A
   67 0000001C 6008            STR              R0, [R1]    ; [R1] = R0
   68 0000001E         
   69 0000001E         ; Registro de funcion alternativa
   70 0000001E 4973            LDR              R1, =GPIO_PORTB_AFSEL_R ; R1 = 
                                                            GPIO_PORTN_AFSEL_R 
                                                            (pointer)
   71 00000020 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
   72 00000022 F020 00FF       BIC              R0, R0, #0xFF ; R0 = R0&~0x02 (
                                                            disable alt funct o
                                                            n PN1)
   73 00000026 6008            STR              R0, [R1]    ; [R1] = R0
   74 00000028         
   75 00000028         ; set digital enable register
   76 00000028 4971            LDR              R1, =GPIO_PORTB_DEN_R ; R1 = GP
                                                            IO_PORTN_DEN_R (poi
                                                            nter)
   77 0000002A 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
   78 0000002C F040 00FF       ORR              R0, R0, #0xFF ; R0 = R0|0xFF (a
                                                            ctiva digital I/O  
                                                            PD0-PD7)
   79 00000030 6008            STR              R0, [R1]    ; [R1] = R0
   80 00000032         
   81 00000032         ; set port control register
   82 00000032 4970            LDR              R1, =GPIO_PORTB_PCTL_R ; R1 = G
                                                            PIO_PORTN_PCTL_R (p
                                                            ointer)



ARM Macro Assembler    Page 4 


   83 00000034 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
   84 00000036 F020 30FF       BIC              R0, R0, #0xFFFFFFFF ; R0 = R0&0
                                                            xFFFFFFFF (clear bi
                                                            t1 field)
   85 0000003A 6008            STR              R0, [R1]    ; [R1] = R0
   86 0000003C         
   87 0000003C         
   88 0000003C         ; set analog mode select register
   89 0000003C 496E            LDR              R1, =GPIO_PORTB_AMSEL_R ; R1 = 
                                                            GPIO_PORTN_AMSEL_R 
                                                            (pointer)
   90 0000003E 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
   91 00000040 F020 00FF       BIC              R0, R0, #0xFF ; R0 = R0&~0xFF (
                                                            disable analog func
                                                            tionality on PD0-PD
                                                            7)
   92 00000044 6008            STR              R0, [R1]    ; [R1] = R0
   93 00000046         
   94 00000046         ;activa drenador abierto
   95 00000046         
   96 00000046         ; activa drenador abierto
   97 00000046 496D            LDR              R1, =GPIO_PORTB_ODR_R ; R1 = GP
                                                            IO_PORTB_ODR_R (poi
                                                            nter)
   98 00000048 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
   99 0000004A F040 002A       ORR              R0, R0, #0x2A
  100 0000004E 6008            STR              R0, [R1]    ; [R1] = R0
  101 00000050         
  102 00000050         ;suelta en bus
  103 00000050 496B            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  104 00000052 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
  105 00000054 F040 002A       ORR              R0, R0, #0x2A
  106 00000058 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno
  107 0000005A 4770            BX               LR          ; regresa
  108 0000005C         
  109 0000005C         ;*******************************CODIGO DE RESET*********
                       ********************
  110 0000005C         INI_reset
  111 0000005C         
  112 0000005C         ;se asegura que el bus este libre
  113 0000005C 4968            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  114 0000005E 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  115 00000060 F040 0002       ORR              R0, R0, #0x02 ; coloca un uno e
                                                            n el bit uno (MASTE
                                                            R TX=1 Resistor pul
                                                            lup)
  116 00000064 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno
  117 00000066 BF00            nop



ARM Macro Assembler    Page 5 


  118 00000068 BF00            nop
  119 0000006A BF00            nop
  120 0000006C BF00            nop
  121 0000006E         ;-------------------------------baja TX=0 por 480µs mini
                       mo--------------------------------------
  122 0000006E         
  123 0000006E 4964            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  124 00000070 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  125 00000072 F020 0002       BIC              R0, R0, #0x02 ; cero en el bit 
                                                            uno (MASTER TX RESE
                                                            T PULSE)
  126 00000076 6008            STR              R0, [R1]    ; [R1] = R0  lo env
                                                            ia al puerto      
  127 00000078                 REtardo          #480        ; llamo macro retar
                                                            do de 480 useg míni
                                                            mo
   25 00000078 B580            PUSH             {R7, LR}
   26 0000007A F44F 77F0       MOV              R7, #480
   27 0000007E EA4F 0787       LSL              R7, R7, #2
   28 00000082 F7FF FFFE       BL               DELAY_480
   29 00000086 E8BD 4080       POP              {R7,LR}
  128 0000008A         
  129 0000008A         ;------------------------------coloca TX em alta impedan
                       cia TX=1 Resistor pullup--------------------------------
                       -
  130 0000008A 495D            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  131 0000008C 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  132 0000008E F040 0002       ORR              R0, R0, #0x02 ; coloca un uno e
                                                            n el bit uno del pu
                                                            erto B
  133 00000092 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno (suelta bus 
                                                            TX, Resistor pullup
                                                            )
  134 00000094                 REtardo          #60         ;esperar entre 16 y
                                                             60 useg
   25 00000094 B580            PUSH             {R7, LR}
   26 00000096 F04F 073C       MOV              R7, #60
   27 0000009A EA4F 0787       LSL              R7, R7, #2
   28 0000009E F7FF FFFE       BL               DELAY_480
   29 000000A2 E8BD 4080       POP              {R7,LR}
  135 000000A6         
  136 000000A6         ;-------------------------------verifica si DS18B20 esta
                        presente pulso RX=0-----------------------
  137 000000A6 4957            LDR              R1, =GPIO_PORTBR ; R1 = GPIO_PO
                                                            RTBW (pointer lectu
                                                            ra pin B0)
  138 000000A8         es_uno                               ;etiqueta de salto 
                                                            si no responde con 
                                                            cero   
  139 000000A8 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
  140 000000AA F240 0201 



ARM Macro Assembler    Page 6 


              F2C0 0200        MOV32            R2, #0X01   ;muevo uno en 32 bi
                                                            t
  141 000000B2 4010            ANDS             R0, R2      ;verifica si el pin
                                                             B0 es cero DS18B20
                                                            
  142 000000B4 2800            CMP              R0, #0      ;lo compara con cer
                                                            o
  143 000000B6 D1F7            BNE              es_uno      ;si no es cero se q
                                                            ueda en el ciclo
  144 000000B8         
  145 000000B8         ;--------------------------------verifica si DS18B20 sol
                       to el bus---------------------------------- 
  146 000000B8 4952            LDR              R1, =GPIO_PORTBR ; R1 = GPIO_PO
                                                            RTBW (pointer lectu
                                                            ra pin B0)
  147 000000BA         es_cero                              ;etiqueta de salto 
                                                            si no responde con 
                                                            uno  
  148 000000BA 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
  149 000000BC F240 0201 
              F2C0 0200        MOV32            R2, #0X01   ;muevo uno en 32 bi
                                                            t
  150 000000C4 4010            ANDS             R0, R2      ;verifica si el DS1
                                                            8B20 solto el bus R
                                                            X=1 pin B0, Resisto
                                                            r pullup
  151 000000C6 2800            CMP              R0, #0      ;lo compara con cer
                                                            o
  152 000000C8 D0F7            BEQ              es_cero     ;si es cero continu
                                                            a en el bucle
  153 000000CA 4770            BX               LR
  154 000000CC         
  155 000000CC         ;----------------------FUNCIONES PARA ENVIAR CERO Y UNO 
                       AL DS18B20------
  156 000000CC         
  157 000000CC         ENVIA_CERO
  158 000000CC B403            PUSH             {R0, R1}
  159 000000CE 494C            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  160 000000D0 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  161 000000D2 F020 0002       BIC              R0, R0, #0x02 ; cero en el bit 
                                                            uno (MASTER TX RESE
                                                            T PULSE)
  162 000000D6 6008            STR              R0, [R1]    ; [R1] = R0  lo env
                                                            ia al puerto      
  163 000000D8                 REtardo          #75         ;llamo retardo entr
                                                            e 60-120 useg
   25 000000D8 B580            PUSH             {R7, LR}
   26 000000DA F04F 074B       MOV              R7, #75
   27 000000DE EA4F 0787       LSL              R7, R7, #2
   28 000000E2 F7FF FFFE       BL               DELAY_480
   29 000000E6 E8BD 4080       POP              {R7,LR}
  164 000000EA         ;-------------------------------------------------------
                       ------------------
  165 000000EA 4945            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri



ARM Macro Assembler    Page 7 


                                                            tura)
  166 000000EC 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  167 000000EE F040 0002       ORR              R0, R0, #0x02 ; coloca un uno e
                                                            n el bit uno
  168 000000F2 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno (suelta bus 
                                                            TX, Resistor pullup
                                                            )
  169 000000F4 BF00            NOP                          ;tiempo 0.25 useg
  170 000000F6 BF00            NOP                          ;tiempo 0.25 useg
  171 000000F8 BF00            NOP                          ;tiempo 0.25 useg
  172 000000FA BF00            NOP                          ;tiempo 0.25 useg
  173 000000FC BF00            NOP
  174 000000FE BC03            POP              {R0, R1}    ;tiempo 0.25 useg
  175 00000100 4770            BX               LR
  176 00000102         ;-------------------------------------------------------
                       ---------------------------
  177 00000102         ENVIA_UNO
  178 00000102         
  179 00000102 B403            PUSH             {R0, R1}
  180 00000104 493E            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  181 00000106 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  182 00000108 F020 0002       BIC              R0, R0, #0x02 ; cero en el bit 
                                                            uno (MASTER TX RESE
                                                            T PULSE)
  183 0000010C 6008            STR              R0, [R1]    ; [R1] = R0  lo env
                                                            ia al puerto      
  184 0000010E BF00            NOP                          ;tiempo 0.25 useg
  185 00000110 BF00            NOP                          ;tiempo 0.25 useg
  186 00000112 BF00            NOP                          ;tiempo 0.25 useg
  187 00000114 BF00            NOP                          ;tiempo 0.25 useg
  188 00000116 BF00            NOP                          ;tiempo 0.25 useg
  189 00000118 BF00            NOP                          ;tiempo 0.25 useg
  190 0000011A BF00            NOP
  191 0000011C         
  192 0000011C         ;-------------------------------------------------------
                       -------------------------
  193 0000011C 4938            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  194 0000011E 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  195 00000120 F040 0002       ORR              R0, R0, #0x02 ; coloca un uno e
                                                            n el bit uno
  196 00000124 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno (suelta bus 
                                                            TX, Resistor pullup
                                                            )
  197 00000126                 REtardo          #58         ;llama retardo
   25 00000126 B580            PUSH             {R7, LR}
   26 00000128 F04F 073A       MOV              R7, #58
   27 0000012C EA4F 0787       LSL              R7, R7, #2
   28 00000130 F7FF FFFE       BL               DELAY_480
   29 00000134 E8BD 4080       POP              {R7,LR}
  198 00000138 BC03            POP              {R0, R1}    ;restaura todo



ARM Macro Assembler    Page 8 


  199 0000013A 4770            BX               LR
  200 0000013C         ;-----------------------------LECTURA DE SENSOR DE TEMPE
                       RATURA---------------------------
  201 0000013C         
  202 0000013C         LECTURA
  203 0000013C B41F            PUSH             {R0, R1, R2, R3, R4} ;Salba los
                                                             registros que se v
                                                            an a utilizar
  204 0000013E EBA3 0303       SUB              R3, R3, R3  ;borra registro que
                                                             recibe dato inicia
                                                             en cero
  205 00000142         
  206 00000142         NUEVO_BIT
  207 00000142 492F            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (puntero de es
                                                            critura)
  208 00000144 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  209 00000146 F020 0002       BIC              R0, R0, #0x02 ; cero en el bit 
                                                            uno (MASTER TX RESE
                                                            T PULSE)
  210 0000014A 6008            STR              R0, [R1]    ; [R1] = R0  pone e
                                                            l puerto en cero 
  211 0000014C BF00            NOP                          ; 0.25 useg
  212 0000014E BF00            NOP                          ; 0.25 useg
  213 00000150 BF00            NOP                          ; 0.25 useg
  214 00000152 BF00            NOP                          ; 0.25 useg
  215 00000154 BF00            NOP
  216 00000156 492A            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (puntero de es
                                                            critura)
  217 00000158 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  218 0000015A F040 0002       ORR              R0, R0, #0x02 ; coloca un uno e
                                                            n el bit uno pull u
                                                            p
  219 0000015E 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno (suelta bus 
                                                            TX, Resistor pullup
                                                            )
  220 00000160         ;-------------------------------------------------------
                       ---------------------------------------
  221 00000160                 REtardo          #14         ;espera 13 useg
   25 00000160 B580            PUSH             {R7, LR}
   26 00000162 F04F 070E       MOV              R7, #14
   27 00000166 EA4F 0787       LSL              R7, R7, #2
   28 0000016A F7FF FFFE       BL               DELAY_480
   29 0000016E E8BD 4080       POP              {R7,LR}
  222 00000172 4924            LDR              R1, =GPIO_PORTBR ; R1 = GPIO_PO
                                                            RTBR (puntero de le
                                                            ctura) (0.5 useg)
  223 00000174 6808            LDR              R0, [R1]    ;lee el dato en el 
                                                            pin B0 (0.25 useg)
  224 00000176         ;-----------validación----------------------------------
                       ---------------------------------------- 
  225 00000176 F240 0201 
              F2C0 0200        MOV32            R2, #0X01   ;muevo 0x01 al regi
                                                            stro R2 (0.5 useg)
  226 0000017E 4010            ANDS             R0, R0, R2  ;verifica si es un 



ARM Macro Assembler    Page 9 


                                                            cero (0.25 useg)
  227 00000180 B108            CBZ              R0, PONCERO ;si es cero salta a
                                                             PONCERO (0.25 useg
                                                            )
  228 00000182 F443 4300       ORR              R3, R3, #0x00008000 ; si no es 
                                                             coloca un uno en e
                                                            n el regitro de dat
                                                            os (0.25 useg)
  229 00000186         PONCERO
  230 00000186 EA4F 0353       LSR              R3, R3, #1  ;lo rota una vez (0
                                                            .25 useg)
  231 0000018A                 REtardo          #45
   25 0000018A B580            PUSH             {R7, LR}
   26 0000018C F04F 072D       MOV              R7, #45
   27 00000190 EA4F 0787       LSL              R7, R7, #2
   28 00000194 F7FF FFFE       BL               DELAY_480
   29 00000198 E8BD 4080       POP              {R7,LR}
  232 0000019C 1E64            SUBS             R4, R4, #1  ;decrementa el tama
                                                            ño del dato   (0.25
                                                             useg)
  233 0000019E B104            CBZ              R4, FIN
  234 000001A0 E7CF            B                NUEVO_BIT
  235 000001A2         FIN
  236 000001A2 F845 3E00       STRT             R3, [R5]
  237 000001A6 BC1F            POP              {R0, R1, R2, R3, R4}
  238 000001A8 4770            BX               LR
  239 000001AA         ;******************************RETARDO******************
                       *******************
  240 000001AA         
  241 000001AA         DELAY_480
  242 000001AA         ;---------------------SALVO REGISTROS EN LA PILA--------
                       ---------------------------
  243 000001AA B407            PUSH             {R0,R1,R2}
  244 000001AC         
  245 000001AC         ;---------------------------------detiene el contador---
                       ----------------------------
  246 000001AC 4816            LDR              R0, =SYSCTL_STCTRL ;toma la dir
                                                            eccion del control 
                                                            tictak
  247 000001AE 6801            LDR              R1, [R0]    ;le el registro de 
                                                            estado
  248 000001B0 F001 0100       AND              R1, #0X00000000 
                                                            ;lo coloca en cero
  249 000001B4 6001            STR              R1, [R0]    ;lo escribe en memo
                                                            ria
  250 000001B6         ;---------------------------CUENTA PARA 480µs =1800-----
                       ---------------------------
  251 000001B6 4815            LDR              R0, =SYSCTL_STRELOAD ;toma la d
                                                            irección del regist
                                                            ro STRELOAD
  252 000001B8 6007            STR              R7, [R0]    ;lo escribe en la m
                                                            emoria
  253 000001BA         ;------------------------------VALOR CONCURENTE IGUAL A 
                       CERO----------------------
  254 000001BA 4815            LDR              R0, =SYSCTL_STCURRENT 
                                                            ;Toma direccion
  255 000001BC F04F 0100       MOV              R1, #0      ;mueve valor cero
  256 000001C0 6001            STR              R1, [R0]    ;inicializa con cer
                                                            o



ARM Macro Assembler    Page 10 


  257 000001C2         ;---------------------------------Inicializa cuenta-----
                       ------------------------
  258 000001C2 4811            LDR              R0, =SYSCTL_STCTRL ;Toma direcc
                                                            ion del registro co
                                                            ntol
  259 000001C4 6801            LDR              R1, [R0]    ;lee registro contr
                                                            ol
  260 000001C6 F041 0101       ORR              R1, #0X00000001 
                                                            ;activa contador
  261 000001CA 6001            STR              R1, [R0]    ;lo manda al regist
                                                            ro
  262 000001CC         ;-------------------------------------------------------
                       -------------
  263 000001CC 480E            LDR              R0, =SYSCTL_STCTRL
  264 000001CE         notOverFlow
  265 000001CE 6801            LDR              R1, [R0]
  266 000001D0 F44F 3280       MOV              R2, #0x00010000
  267 000001D4 EA01 0102       AND              R1, R2      ;verifica si ya se 
                                                            desbordo
  268 000001D8 B901            CBNZ             R1, OverFlow ;Salta si se desbo
                                                            rdo
  269 000001DA E7F8            B                notOverFlow ;Salta si no se des
                                                            bordo
  270 000001DC         OverFlow
  271 000001DC BC07            POP              {R0,R1,R2}
  272 000001DE 4770            BX               LR
  273 000001E0         
  274 000001E0         
  275 000001E0                 ALIGN                        ; make sure the end
                                                             of this section is
                                                             aligned
  276 000001E0                 END                          ; end of file
              400FE608 
              400FEA08 
              40061400 
              40061420 
              4006151C 
              4006152C 
              40061528 
              4006150C 
              40061008 
              40061004 
              E000E010 
              E000E014 
              E000E018 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\sensor.d -o.\objects\sensor.o -ID:\Escritorio\RESPALD
O\RTE\_CodigoLCD -I"D:\OS C (Postizo)\uVision\ARM\PACK\ARM\CMSIS\5.0.0\CMSIS\In
clude" -I"D:\OS C (Postizo)\uVision\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include
\TM4C129" --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 522" 
--predefine="_RTE_ SETA 1" --predefine="TM4C1294NCPDT SETA 1" --list=.\listings
\sensor.lst sensor.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 33 in file sensor.s
   Uses
      None
Comment: .text unused
DELAY_480 000001AA

Symbol: DELAY_480
   Definitions
      At line 241 in file sensor.s
   Uses
      At line 42 in file sensor.s
      At line 28 in macro REtardo
      at line 127 in file sensor.s

ENVIA_CERO 000000CC

Symbol: ENVIA_CERO
   Definitions
      At line 157 in file sensor.s
   Uses
      At line 39 in file sensor.s
Comment: ENVIA_CERO used once
ENVIA_UNO 00000102

Symbol: ENVIA_UNO
   Definitions
      At line 177 in file sensor.s
   Uses
      At line 40 in file sensor.s
Comment: ENVIA_UNO used once
FIN 000001A2

Symbol: FIN
   Definitions
      At line 235 in file sensor.s
   Uses
      At line 233 in file sensor.s
Comment: FIN used once
GPIONinitloop 0000000C

Symbol: GPIONinitloop
   Definitions
      At line 58 in file sensor.s
   Uses
      At line 61 in file sensor.s
Comment: GPIONinitloop used once
INI_reset 0000005C

Symbol: INI_reset
   Definitions
      At line 110 in file sensor.s
   Uses
      At line 38 in file sensor.s
Comment: INI_reset used once
LECTURA 0000013C



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols


Symbol: LECTURA
   Definitions
      At line 202 in file sensor.s
   Uses
      At line 41 in file sensor.s
Comment: LECTURA used once
NUEVO_BIT 00000142

Symbol: NUEVO_BIT
   Definitions
      At line 206 in file sensor.s
   Uses
      At line 234 in file sensor.s
Comment: NUEVO_BIT used once
OverFlow 000001DC

Symbol: OverFlow
   Definitions
      At line 270 in file sensor.s
   Uses
      At line 268 in file sensor.s
Comment: OverFlow used once
PONCERO 00000186

Symbol: PONCERO
   Definitions
      At line 229 in file sensor.s
   Uses
      At line 227 in file sensor.s
Comment: PONCERO used once
UP_DS18B20 00000000

Symbol: UP_DS18B20
   Definitions
      At line 45 in file sensor.s
   Uses
      At line 37 in file sensor.s
Comment: UP_DS18B20 used once
es_cero 000000BA

Symbol: es_cero
   Definitions
      At line 147 in file sensor.s
   Uses
      At line 152 in file sensor.s
Comment: es_cero used once
es_uno 000000A8

Symbol: es_uno
   Definitions
      At line 138 in file sensor.s
   Uses
      At line 143 in file sensor.s
Comment: es_uno used once
notOverFlow 000001CE

Symbol: notOverFlow
   Definitions



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

      At line 264 in file sensor.s
   Uses
      At line 269 in file sensor.s
Comment: notOverFlow used once
15 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

GPIO_PORTBR 40061004

Symbol: GPIO_PORTBR
   Definitions
      At line 2 in file sensor.s
   Uses
      At line 137 in file sensor.s
      At line 146 in file sensor.s
      At line 222 in file sensor.s

GPIO_PORTBW 40061008

Symbol: GPIO_PORTBW
   Definitions
      At line 3 in file sensor.s
   Uses
      At line 103 in file sensor.s
      At line 113 in file sensor.s
      At line 123 in file sensor.s
      At line 130 in file sensor.s
      At line 159 in file sensor.s
      At line 165 in file sensor.s
      At line 180 in file sensor.s
      At line 193 in file sensor.s
      At line 207 in file sensor.s
      At line 216 in file sensor.s

GPIO_PORTB_AFSEL_R 40061420

Symbol: GPIO_PORTB_AFSEL_R
   Definitions
      At line 5 in file sensor.s
   Uses
      At line 70 in file sensor.s
Comment: GPIO_PORTB_AFSEL_R used once
GPIO_PORTB_AMSEL_R 40061528

Symbol: GPIO_PORTB_AMSEL_R
   Definitions
      At line 7 in file sensor.s
   Uses
      At line 89 in file sensor.s
Comment: GPIO_PORTB_AMSEL_R used once
GPIO_PORTB_DEN_R 4006151C

Symbol: GPIO_PORTB_DEN_R
   Definitions
      At line 6 in file sensor.s
   Uses
      At line 76 in file sensor.s
Comment: GPIO_PORTB_DEN_R used once
GPIO_PORTB_DIR_R 40061400

Symbol: GPIO_PORTB_DIR_R
   Definitions
      At line 4 in file sensor.s
   Uses
      At line 64 in file sensor.s
Comment: GPIO_PORTB_DIR_R used once



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

GPIO_PORTB_ODR_R 4006150C

Symbol: GPIO_PORTB_ODR_R
   Definitions
      At line 9 in file sensor.s
   Uses
      At line 97 in file sensor.s
Comment: GPIO_PORTB_ODR_R used once
GPIO_PORTB_PCTL_R 4006152C

Symbol: GPIO_PORTB_PCTL_R
   Definitions
      At line 8 in file sensor.s
   Uses
      At line 82 in file sensor.s
Comment: GPIO_PORTB_PCTL_R used once
SYSCTL_PRGPIO_R 400FEA08

Symbol: SYSCTL_PRGPIO_R
   Definitions
      At line 13 in file sensor.s
   Uses
      At line 57 in file sensor.s
Comment: SYSCTL_PRGPIO_R used once
SYSCTL_PRGPIO_R12 00000200

Symbol: SYSCTL_PRGPIO_R12
   Definitions
      At line 15 in file sensor.s
   Uses
      At line 60 in file sensor.s
Comment: SYSCTL_PRGPIO_R12 used once
SYSCTL_RCGCGPIO_R 400FE608

Symbol: SYSCTL_RCGCGPIO_R
   Definitions
      At line 12 in file sensor.s
   Uses
      At line 51 in file sensor.s
Comment: SYSCTL_RCGCGPIO_R used once
SYSCTL_RCGCGPIO_R12 00000200

Symbol: SYSCTL_RCGCGPIO_R12
   Definitions
      At line 14 in file sensor.s
   Uses
      At line 53 in file sensor.s
Comment: SYSCTL_RCGCGPIO_R12 used once
SYSCTL_STCTRL E000E010

Symbol: SYSCTL_STCTRL
   Definitions
      At line 20 in file sensor.s
   Uses
      At line 246 in file sensor.s
      At line 258 in file sensor.s
      At line 263 in file sensor.s

SYSCTL_STCURRENT E000E018



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols


Symbol: SYSCTL_STCURRENT
   Definitions
      At line 18 in file sensor.s
   Uses
      At line 254 in file sensor.s
Comment: SYSCTL_STCURRENT used once
SYSCTL_STRELOAD E000E014

Symbol: SYSCTL_STRELOAD
   Definitions
      At line 19 in file sensor.s
   Uses
      At line 251 in file sensor.s
Comment: SYSCTL_STRELOAD used once
15 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

Start 00000000

Symbol: Start
   Definitions
      At line 36 in file sensor.s
   Uses
      None
Comment: Start unused
1 symbol
368 symbols in table
